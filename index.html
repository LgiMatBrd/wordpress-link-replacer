<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8">
		<title>Gerador de Certificados</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> 
	</head>
	<body>
	
	<div style="padding: 2% 5% 30%; background-color: rgb(35, 35, 35);" class="panel panel-default">
<div style="background-color: rgb(255, 255, 255); width: 100% ! important; padding: 1%; border-radius: 8px; box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.75);" class="container">
<div id="content">
    <ul id="tabs" class="nav nav-tabs nav-justified" data-tabs="tabs">
        <li><a href="#SELECT" data-toggle="tab">GERAR SELECT</a></li>
        <li><a href="#SQL" data-toggle="tab">ENVIAR .SQL</a></li>
        <li><a href="#AUTOMATICO" data-toggle="tab">TROCA AUTOMÁTICO</a></li>
    </ul>
    <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="SELECT">
            <h1>GERAR SELECT</h1>
			<hr>
            <p>Gerador de SELECT pronto para ser ser executado no banco de dados.</p>
        </div>
        <div class="tab-pane" id="SQL">
            <h1>ENVIAR .SQL</h1>
			<hr>
            <p>Gerador de SELECT pronto para ser ser executado no banco de dados.</p>
        </div>
        <div class="tab-pane" id="AUTOMATICO">
            <h1>AUTOMÁTICO</h1>
			<hr>
            <p>Gerador de SELECT pronto para ser ser executado no banco de dados.</p>
        </div>
    </div>
</div>


<script type="text/javascript">
    jQuery(document).ready(function ($) {
        $('#tabs').tab();
    });
</script>    
</div> <!-- container -->
</div>

	</body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript">
// --------------------------------------------------
// ENVIA O REQUEST PARA GERAR OS CERTIFICADOS
// --------------------------------------------------
$(function() { //shorthand document.ready function
    $('#gerar_certificados').on('submit', function(e) { //use on if jQuery 1.7+
		// PEGA OS DADOS DO FORM
		var nome_curso = $('#nome_curso').val();
		var carga_horaria = $('#carga_curso').val();
		var local_e_data = $('#local_e_data').val();
		var nome_assinatura_1 = $('#nome_assinatura_1').val();
		var cargo_assinatura_1 = $('#cargo_assinatura_1').val();
		var nome_assinatura_2 = $('#nome_assinatura_2').val();
		var cargo_assinatura_2 = $('#cargo_assinatura_2').val();
		
		var lista_nomes = $('#lista_aluno').val();
		
		var valores = document.getElementById('seleciona_base');

		function alinha_nome(nome) {
			var nome_aluno_limpo = nome;
			var count = parseInt(nome.length, 10);
			if (count <= 30) {
				var diferenca = 30 - count;
				var loops = diferenca / 2;
				var novo_nome = nome_aluno_limpo;
				for(var i = 0; i < loops; i++) {
					var nome_temp = novo_nome;
					var novo_nome = ' '+nome_temp;
				}
				return novo_nome;
			} else {
				return nome;
			}
		}
			
		/*
		/ SUMÁRIO
		/ 0 = Contenda
		/ 1 = Juquiá
		/ 2 = Alm. Tamandare
		/ 3 = F.R.G
		*/
		if (valores.selectedIndex == 0) {
			var base = '&base=./bases/certificado_contenda.jpg';
		}
		if (valores.selectedIndex == 1) {
			var base = '&base=./bases/certificado_juquia.jpg';
		}
		if (valores.selectedIndex == 2) {
			var base = '&base=./bases/certificado_almirante_tamandare.jpg';
		}
		if (valores.selectedIndex == 3) {
			var base = '&base=./bases/certificado_f-r-g.jpg';
		}
		
		// SEPARA A LISTA DE NOMES E FAZ O LOOP
		var str_array = lista_nomes.split(',');
		for(var i = 0; i < str_array.length; i++) {
			
			var nome_aluno_limpo = str_array[i];

			var novo_nome = alinha_nome(str_array[i]);
			var nome_assinatura_1 = alinha_nome(nome_assinatura_1);
			var cargo_assinatura_1 = alinha_nome(cargo_assinatura_1);
			var nome_assinatura_2 = alinha_nome(nome_assinatura_2);
			var cargo_assinatura_2 = alinha_nome(cargo_assinatura_2);

			// FAZ O REQUEST PARA BAIXAR AS IMAGENS
			//alert('APERTE "ENTER" PARA CONTINUAR...');
			window.open('./gerador_de_certificados.php?nome='+novo_nome+'&nome_curso='+nome_curso+'&carga_horaria='+carga_horaria+'&local_e_data='+local_e_data+'&nome_assinatura_1='+nome_assinatura_1+'&cargo_assinatura_1='+cargo_assinatura_1+'&nome_assinatura_2='+nome_assinatura_2+'&cargo_assinatura_2='+cargo_assinatura_2+'&nome_aluno_limpo='+nome_aluno_limpo+base);
		}
    });
});


// NÃO ESQUECER
// - CRIAR FUNÇÃO PARA ALINHA O TEXTO
// - ARRUMAR AS BASES DOS CERTIFICADOS
</script>
</html>